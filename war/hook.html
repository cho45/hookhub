<%
hook  = stash("hook");
title = String(hook.title())
%>
<%include= _header %>
<div id="hook" class="section">
	<h2>
		<%= hook.title() %>

		<% if (c.user()) { %>
		<span class="less">
			<a href="/<%= user %>/hook/new?fork=<%= hook.id() %>" class="fork">Fork</a>
		</span>
		<% } %>
	</h2>

	<div class="section">
		<h3>
			Code

			<% if (c.userIsAuthor()) { %>
			<span class="less">
				<a href="/<%= author %>/hook/<%= hook.key().getId() %>/edit">Edit</a>
			</span>
			<% } %>
		</h3>

		<pre><%= hook.code() %></pre>

		<% if ((parent = hook.parent())) { %>
			<div class="fork">
				This hook was forked from <a href="/<%= parent.user().nick() %>/hook/<%= parent.id() %>"><%= parent.user().nick() %></a>.
			</div>
		<% } %>

		<div style="text-align: right">
			<script type="text/javascript"><!--
			google_ad_client = "pub-4629424540171624";
			/* 728x90, hookhub 09/07/07 */
			google_ad_slot = "5068464069";
			google_ad_width = 728;
			google_ad_height = 90;
			//-->
			</script>
			<script type="text/javascript"
			src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
			</script>
		</div>

	</div>

	<div class="section">
		<h3>Last result</h3>
		<pre><%= hook.result() %></pre>
	</div>

	<% if (c.userIsAuthor()) { %>
	<div class="section">
		<h3>Hook URI <span class="less">(only you can see)</span></h3>
		<p>
			<input type="text" value="<%= c.absolute("/hook/" + hook.token()) %>" size="80" onclick="this.select()" onfocus="this.select()" class="text"/>
		</p>
	</div>
	<% } %>
	</div>
<%include= _footer %>
